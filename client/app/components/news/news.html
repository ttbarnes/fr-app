<section class="row news-home long-copy-line-height" ng-class="{'promise-error': vm.promiseError}">
  <div class="main-content">

    <ul ng-if="vm.data && vm.data.length">
    <h2 class="sr-only">Fiona Ross News</h2>

    <ul>
      <li ng-repeat="post in vm.data" ng-class="{last: $last}">
        <h3>{{post.title}}</h3>
        <small class="date">{{post.createdAt | date:'dd MMM yyyy'}}</small>

        <div class="row cancel-margin">

          <div ng-if="!post.ticketsLink && post.mainImage && !post.miniGalleryImages.length ||
                      !post.ticketsLink && post.mainImage.url && !post.miniGalleryImages.length">

            <div ng-class="{'col-50': post.secondaryImageUrl}">
              <div ng-if="post.mainImage && post.mainImage.url && !post.mainImage.externalLink"
                   class="img-wrap">
                <img ng-src="{{post.mainImage.url}}" alt="Fiona Ross | {{post.title}}" />
              </div>

              <div ng-if="post.mainImage && post.mainImage.url && post.mainImage.externalLink"
                    class="img-wrap">
                <a href="{{post.mainImage.externalLink}}" target="_blank">
                  <img ng-src="{{post.mainImage.url}}" alt="Fiona Ross | {{post.title}}" />
                </a>
              </div>
            </div>

            <div ng-if="post.secondaryImageUrl"
                 ng-class="{'col-50': post.secondaryImageUrl}">
              <img ng-src="{{post.secondaryImageUrl}}" alt="Fiona Ross | {{post.title}}" />
            </div>

          </div>

          <div ng-if="post.mainImage && post.mainImage.url && post.miniGalleryImages.length" class="cancel-margin">
            <div ng-class="{'col-50': post.secondaryImageUrl}">

              <div ng-if="post.mainImage && post.mainImage.url && !post.mainImage.externalLink" class="img-wrap">
                <img ng-src="{{post.mainImage.url}}" alt="Fiona Ross | {{post.title}}" />
              </div>

              <div ng-if="post.mainImage && post.mainImage.url && post.mainImage.externalLink" class="img-wrap">
                <a href="{{post.mainImage.externalLink}}" target="_blank">
                  <img ng-src="{{post.mainImage.url}}" alt="Fiona Ross | {{post.title}}" />
                </a>
              </div>

              <div ng-if="post.secondaryImageUrl"
                   class="col-50">
                <img ng-src="{{post.secondaryImageUrl}}" alt="Fiona Ross | {{post.title}}" />
              </div>

            </div>
          </div>

        <ul ng-if="post.sections">
          <li ng-repeat="section in post.sections" ng-class="{last: $last, first: $first}" class="article-section">

            <div ng-class="{'col-copy': section.images.length}">
              <div ng-bind-html="section.copy" class="body-content link-highlight-hover-border"></div>
            </div>

            <div ng-if="section.images" class="col-images">
              <ul>
                <li ng-repeat="image in section.images" class="col-img">
                  <img ng-src="{{image.url}}" alt="Fiona Ross | {{image.imgAlt}}"/>
                </li>
              </ul>
            </div>

            <div ng-if="section.videoEmbed">
              <iframe width="600" height="400" ng-src="{{vm.trustSrc(section.videoEmbed)}}" frameborder="0" allowfullscreen></iframe>
            </div>

          </li>
        </ul>

        <div ng-if="!post.sections">

          <div ng-bind-html="post.bodyMain" class="body-content link-highlight-hover-border"></div>

          <a ng-if="post.ticketsLink" 
            href="{{post.ticketsLink}}" 
            target="_blank" 
            class="button">Get tickets</a>

          <div class="link-highlight-hover-border venue-link">
            <a ng-if="post.venueLink" 
              href="{{post.venueLink}}" 
              target="_blank">Venue</a>
          </div>
        </div>

        <div ng-if="post.ticketsLink && post.mainImage && post.mainImage.url && !post.miniGalleryImages.length">

          <div class="col-70 max-width-650">

              <div ng-if="post.mainImage && post.mainImage.url && !post.mainImage.externalLink" class="img-wrap">
                <img ng-src="{{post.mainImage.url}}" alt="Fiona Ross | {{post.title}}" />
              </div>

              <div ng-if="post.mainImage && post.mainImage.url && post.mainImage.externalLink" class="img-wrap">
                <a href="{{post.mainImage.externalLink}}" target="_blank">
                  <img ng-src="{{post.mainImage.url}}" alt="Fiona Ross | {{post.title}}" />
                </a>
              </div>

          </div>

          <div class="col-30">

            <a ng-if="post.ticketsLink"
               href="{{post.ticketsLink}}"
               target="_blank"
               class="button">Get tickets</a>
            <div class="link-highlight-hover-border">
              <a ng-if="post.venueLink"
                 href="{{post.venueLink}}"
                 target="_blank"
                 class="venue-link">Venue</a>
            </div>

          </div>

        </div>

        <div class="row cancel-margin">

          <div ng-bind-html="post.bodyMain"
                class="body-content link-highlight-hover-border"></div>

          <ul ng-if="post.quotes" class="quotes">
            <li ng-repeat="quote in post.quotes">
              &quot;{{quote.copy}}&quot;<span class="news-quote-author">&nbsp;-&nbsp;{{quote.author}}</span>
            </li>
          </ul>

          <a ng-if="post.ticketsLink && !post.mainImage.url"
              href="{{post.ticketsLink}}"
              target="_blank"
              class="button">Get tickets</a>

        </div>

        <div ng-if="post.videoEmbed && !post.miniGalleryImages" class="video-wrapper">
          <iframe width="560" ng-src="{{vm.trustSrc(post.videoEmbed)}}" frameborder="0" allowfullscreen></iframe>
        </div>
        <div ng-if="post.videoEmbedLondonLive" class="video-wrapper">
          <iframe width="620" height="348" src="http://www.londonlive.co.uk/embed/news/2018-03-27/celebrity-music-trainer-is-now-releasing-her-own-music" frameborder="0" allowfullscreen></iframe>
        </div>

        <div ng-if="post.videoEmbed && post.miniGalleryImages" class="row video-with-gallery-row">
          <div class="row post-video">
            <div class="video-wrapper">
              <iframe width="560" ng-src="{{vm.trustSrc(post.videoEmbed)}}" frameborder="0" allowfullscreen></iframe>
            </div>
          </div>
          <ul ng-if="post.miniGalleryImages && post.miniGalleryImages.length" class="row post-gallery">
            <li ng-repeat="image in post.miniGalleryImages" class="post-gallery-image">
              <a ng-click="vm.openLightboxModal(post.miniGalleryImages, $index)">
                <img ng-src="{{image}}" alt="Fiona Ross | {{post.title}}" />
              </a>
            </li>
          </ul>
        </div>

        <div ng-if="!post.videoEmbed && post.miniGalleryImages" class="row">
          <ul ng-if="post.miniGalleryImages && post.miniGalleryImages.length" class="row post-gallery">
            <li ng-repeat="image in post.miniGalleryImages" class="post-gallery-image">
              <a ng-click="vm.openLightboxModal(post.miniGalleryImages, $index)">
                <img ng-src="{{image}}" alt="Fiona Ross | {{post.title}}" />
              </a>
            </li>
          </ul>
        </div>

        <div class="row social-share">
          <p>Share on</p>
          <ul>
            <li class="first">
              <a href="#"
                  socialshare
                  socialshare-url="http://fionaross.co.uk"
                  socialshare-provider="facebook"
                  socialshare-title="Fiona Ross | {{post.title}}"
                  socialshare-media="{{post.socialShare.shareUrl || 'http://fionaross.co.uk'}}">
                  <i class="icon-s-f"></i>
                  <span>Facebook</span>
              </a>
            </li>
            <li class="last">
              <a href="#"
                  socialshare
                  socialshare-provider="twitter"
                  socialshare-text="Fiona Ross | {{post.title}}"
                  socialshare-hashtags="{{post.socialShare.hashtags}}"
                  socialshare-url="{{post.socialShare.shareUrl || 'http://fionaross.co.uk'}}">
                  <i class="icon-s-t"></i>
                  <span>Twitter</span>
              </a>
            </li>
          </ul>
        </div>

      </li>
    </ul>

    <section ng-if="vm.promiseError" class="row">
      <div class="row view-message-short align-center">
        <p class="font-size-h1 new-heading-theme">Check out the latest on...</p>
        <br />
      </div>
      <div class="row">
        <ul class="social-links-large social-links-hover-rotate">
          <li class="col-1-6th-md"><a href="http://soundcloud.com/fiona-ross" target="_blank"><i class="icon-s-s"></i><p>SoundCloud</a></p></li>
          <li class="col-1-6th-md"><a href="https://play.spotify.com/artist/59lPcyDIZJxmRqatvAjct8?play=true" target="_blank"><i class="icon-ssp"></i><p>Spotify</a></p></li>
          <li class="col-1-6th-md"><a href="http://twitter.com/fifross" target="_blank"><i class="icon-s-t"></i><p>Twitter</a></p></li>
          <li class="col-1-6th-md"><a href="http://facebook.com/fionarossmusic" target="_blank"><i class="icon-s-f"></i><p>Facebook</a></p></li>
          <li class="col-1-6th-md"><a href="https://www.instagram.com/fifi_ross" target="_blank"><i class="icon-s-i"></i><p>Instagram</a></p></li>
          <li class="col-1-6th-md"><a href="https://www.youtube.com/channel/UC9srPEZZNgnsM23Q777HbzA" target="_blank"><i class="icon-s-y"></i><p>YouTube</a></p></li>
        </ul>
      </div>
    </section>

    <div class="row button-view-nav">
      <a ui-sref="videos" class="button">
        <span>Videos</span>
        <i class="icon-arrow-right"></i>
      </a>
    </div>

  </div>
</section>
